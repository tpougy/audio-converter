{"version":3,"file":"main-1Sj1dXaD.js","sources":["../../src/types.ts","../../src/utils.ts","../../src/ui-controller.ts","../../node_modules/@ffmpeg/ffmpeg/dist/esm/const.js","../../node_modules/@ffmpeg/ffmpeg/dist/esm/utils.js","../../node_modules/@ffmpeg/ffmpeg/dist/esm/errors.js","../../node_modules/@ffmpeg/ffmpeg/dist/esm/classes.js","../../node_modules/@ffmpeg/ffmpeg/dist/esm/types.js","../../node_modules/@ffmpeg/util/dist/esm/errors.js","../../node_modules/@ffmpeg/util/dist/esm/const.js","../../node_modules/@ffmpeg/util/dist/esm/index.js","../../src/converter.ts","../../src/share-handler.ts","../../src/main.ts"],"sourcesContent":["/**\n * Application state types and interfaces\n */\n\nexport type AppState =\n  | 'initial'\n  | 'preview'\n  | 'loading-ffmpeg'\n  | 'converting'\n  | 'completed'\n  | 'error';\n\nexport interface InputFile {\n  name: string;\n  size: number;\n  type: string;\n  blob: Blob;\n}\n\nexport interface ConversionResult {\n  success: boolean;\n  outputFile: Blob | null;\n  outputFileName: string;\n  error: string | null;\n  duration: number;\n}\n\nexport interface ProgressState {\n  stage: 'loading' | 'converting' | 'finalizing';\n  percentage: number;\n  message: string;\n}\n\nexport interface ShareData {\n  files: File[];\n  title: string;\n  text: string;\n}\n\nexport interface ValidationResult {\n  valid: boolean;\n  error: string | null;\n}\n\nexport interface FileInfo {\n  name: string;\n  size: string;\n  type: string;\n}\n\nexport const MAX_FILE_SIZE = 100 * 1024 * 1024; // 100 MB\n\nexport const SUPPORTED_MIME_TYPES = [\n  'audio/opus',\n  'audio/ogg',\n  'audio/ogg; codecs=opus',\n  'audio/webm',\n  'audio/webm; codecs=opus',\n];\n\nexport const SUPPORTED_EXTENSIONS = ['.opus', '.ogg'];\n\nexport const OUTPUT_BITRATE = '192k';\nexport const OUTPUT_EXTENSION = '.mp3';\n","/**\n * Utility functions for file validation and formatting\n */\n\nimport {\n  ValidationResult,\n  FileInfo,\n  MAX_FILE_SIZE,\n  SUPPORTED_MIME_TYPES,\n  SUPPORTED_EXTENSIONS,\n  OUTPUT_EXTENSION,\n} from './types';\n\nexport function formatFileSize(bytes: number): string {\n  if (bytes === 0) return '0 Bytes';\n\n  const k = 1024;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n}\n\nexport function getFileExtension(filename: string): string {\n  const lastDot = filename.lastIndexOf('.');\n  if (lastDot === -1) return '';\n  return filename.substring(lastDot).toLowerCase();\n}\n\nexport function replaceExtension(filename: string, newExtension: string): string {\n  const lastDot = filename.lastIndexOf('.');\n  if (lastDot === -1) return filename + newExtension;\n  return filename.substring(0, lastDot) + newExtension;\n}\n\nexport function validateFile(file: File): ValidationResult {\n  if (file.size > MAX_FILE_SIZE) {\n    return {\n      valid: false,\n      error: `Arquivo muito grande. O tamanho máximo é ${formatFileSize(MAX_FILE_SIZE)}.`,\n    };\n  }\n\n  const extension = getFileExtension(file.name);\n  const mimeType = file.type.toLowerCase();\n\n  const hasValidExtension = SUPPORTED_EXTENSIONS.includes(extension);\n  const hasValidMimeType =\n    SUPPORTED_MIME_TYPES.includes(mimeType) ||\n    mimeType.startsWith('audio/');\n\n  if (!hasValidExtension && !hasValidMimeType) {\n    return {\n      valid: false,\n      error: 'Este formato não é suportado. Por favor, selecione um arquivo .opus ou .ogg',\n    };\n  }\n\n  return { valid: true, error: null };\n}\n\nexport function getFileInfo(file: File): FileInfo {\n  return {\n    name: file.name,\n    size: formatFileSize(file.size),\n    type: file.type || 'audio/opus',\n  };\n}\n\nexport function getOutputFileName(inputFileName: string): string {\n  return replaceExtension(inputFileName, OUTPUT_EXTENSION);\n}\n\nexport function createDownloadLink(blob: Blob, filename: string): void {\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = filename;\n  document.body.appendChild(a);\n  a.click();\n  document.body.removeChild(a);\n  URL.revokeObjectURL(url);\n}\n\nexport function isWebShareSupported(): boolean {\n  return 'share' in navigator && 'canShare' in navigator;\n}\n\nexport function isServiceWorkerSupported(): boolean {\n  return 'serviceWorker' in navigator;\n}\n\nexport function sleep(ms: number): Promise<void> {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\nexport function generateUniqueId(): string {\n  return Date.now().toString(36) + Math.random().toString(36).substring(2);\n}\n","/**\n * UI Controller - Manages interface states and user interactions\n */\n\nimport { AppState, ProgressState, FileInfo } from './types';\nimport { isWebShareSupported } from './utils';\n\nclass UIController {\n  private currentState: AppState = 'initial';\n\n  private elements: {\n    initialState: HTMLElement | null;\n    previewState: HTMLElement | null;\n    loadingState: HTMLElement | null;\n    convertingState: HTMLElement | null;\n    completedState: HTMLElement | null;\n    errorState: HTMLElement | null;\n    dropZone: HTMLElement | null;\n    fileInput: HTMLInputElement | null;\n    fileName: HTMLElement | null;\n    fileSize: HTMLElement | null;\n    fileType: HTMLElement | null;\n    progressBar: HTMLElement | null;\n    progressText: HTMLElement | null;\n    progressMessage: HTMLElement | null;\n    outputFileName: HTMLElement | null;\n    errorMessage: HTMLElement | null;\n    shareButton: HTMLElement | null;\n    downloadButton: HTMLElement | null;\n    convertButton: HTMLElement | null;\n    cancelButton: HTMLElement | null;\n    retryButton: HTMLElement | null;\n    selectAnotherButton: HTMLElement | null;\n    convertAnotherButton: HTMLElement | null;\n  };\n\n  constructor() {\n    this.elements = {\n      initialState: null,\n      previewState: null,\n      loadingState: null,\n      convertingState: null,\n      completedState: null,\n      errorState: null,\n      dropZone: null,\n      fileInput: null,\n      fileName: null,\n      fileSize: null,\n      fileType: null,\n      progressBar: null,\n      progressText: null,\n      progressMessage: null,\n      outputFileName: null,\n      errorMessage: null,\n      shareButton: null,\n      downloadButton: null,\n      convertButton: null,\n      cancelButton: null,\n      retryButton: null,\n      selectAnotherButton: null,\n      convertAnotherButton: null,\n    };\n  }\n\n  init(): void {\n    this.elements = {\n      initialState: document.getElementById('state-initial'),\n      previewState: document.getElementById('state-preview'),\n      loadingState: document.getElementById('state-loading'),\n      convertingState: document.getElementById('state-converting'),\n      completedState: document.getElementById('state-completed'),\n      errorState: document.getElementById('state-error'),\n      dropZone: document.getElementById('drop-zone'),\n      fileInput: document.getElementById('file-input') as HTMLInputElement,\n      fileName: document.getElementById('file-name'),\n      fileSize: document.getElementById('file-size'),\n      fileType: document.getElementById('file-type'),\n      progressBar: document.getElementById('progress-bar'),\n      progressText: document.getElementById('progress-text'),\n      progressMessage: document.getElementById('progress-message'),\n      outputFileName: document.getElementById('output-file-name'),\n      errorMessage: document.getElementById('error-message'),\n      shareButton: document.getElementById('btn-share'),\n      downloadButton: document.getElementById('btn-download'),\n      convertButton: document.getElementById('btn-convert'),\n      cancelButton: document.getElementById('btn-cancel'),\n      retryButton: document.getElementById('btn-retry'),\n      selectAnotherButton: document.getElementById('btn-select-another'),\n      convertAnotherButton: document.getElementById('btn-convert-another'),\n    };\n\n    if (!isWebShareSupported() && this.elements.shareButton) {\n      this.elements.shareButton.style.display = 'none';\n    }\n\n    this.setState('initial');\n  }\n\n  setState(state: AppState): void {\n    this.currentState = state;\n    this.hideAllStates();\n\n    switch (state) {\n      case 'initial':\n        this.showElement(this.elements.initialState);\n        break;\n      case 'preview':\n        this.showElement(this.elements.previewState);\n        break;\n      case 'loading-ffmpeg':\n        this.showElement(this.elements.loadingState);\n        break;\n      case 'converting':\n        this.showElement(this.elements.convertingState);\n        break;\n      case 'completed':\n        this.showElement(this.elements.completedState);\n        break;\n      case 'error':\n        this.showElement(this.elements.errorState);\n        break;\n    }\n  }\n\n  getState(): AppState {\n    return this.currentState;\n  }\n\n  showFilePreview(fileInfo: FileInfo): void {\n    if (this.elements.fileName) {\n      this.elements.fileName.textContent = fileInfo.name;\n    }\n    if (this.elements.fileSize) {\n      this.elements.fileSize.textContent = fileInfo.size;\n    }\n    if (this.elements.fileType) {\n      this.elements.fileType.textContent = fileInfo.type;\n    }\n    this.setState('preview');\n  }\n\n  updateProgress(progress: ProgressState): void {\n    if (progress.stage === 'loading') {\n      this.setState('loading-ffmpeg');\n    } else {\n      this.setState('converting');\n    }\n\n    if (this.elements.progressBar) {\n      this.elements.progressBar.style.width = `${progress.percentage}%`;\n      this.elements.progressBar.setAttribute(\n        'aria-valuenow',\n        progress.percentage.toString()\n      );\n    }\n    if (this.elements.progressText) {\n      this.elements.progressText.textContent = `${progress.percentage}%`;\n    }\n    if (this.elements.progressMessage) {\n      this.elements.progressMessage.textContent = progress.message;\n    }\n  }\n\n  showCompleted(outputFileName: string): void {\n    if (this.elements.outputFileName) {\n      this.elements.outputFileName.textContent = outputFileName;\n    }\n    this.setState('completed');\n  }\n\n  showError(message: string): void {\n    if (this.elements.errorMessage) {\n      this.elements.errorMessage.textContent = message;\n    }\n    this.setState('error');\n  }\n\n  resetToInitial(): void {\n    if (this.elements.fileInput) {\n      this.elements.fileInput.value = '';\n    }\n    this.resetProgress();\n    this.setState('initial');\n  }\n\n  setupDragAndDrop(onFileDrop: (file: File) => void): void {\n    const dropZone = this.elements.dropZone;\n    if (!dropZone) return;\n\n    dropZone.addEventListener('dragover', (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      dropZone.classList.add('drag-over');\n    });\n\n    dropZone.addEventListener('dragleave', (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      dropZone.classList.remove('drag-over');\n    });\n\n    dropZone.addEventListener('drop', (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      dropZone.classList.remove('drag-over');\n\n      const files = e.dataTransfer?.files;\n      if (files && files.length > 0) {\n        onFileDrop(files[0]);\n      }\n    });\n\n    dropZone.addEventListener('click', () => {\n      this.elements.fileInput?.click();\n    });\n  }\n\n  setupFileInput(onFileSelect: (file: File) => void): void {\n    const fileInput = this.elements.fileInput;\n    if (!fileInput) return;\n\n    fileInput.addEventListener('change', () => {\n      const files = fileInput.files;\n      if (files && files.length > 0) {\n        onFileSelect(files[0]);\n      }\n    });\n  }\n\n  onConvertClick(callback: () => void): void {\n    this.elements.convertButton?.addEventListener('click', callback);\n  }\n\n  onCancelClick(callback: () => void): void {\n    this.elements.cancelButton?.addEventListener('click', callback);\n  }\n\n  onRetryClick(callback: () => void): void {\n    this.elements.retryButton?.addEventListener('click', callback);\n  }\n\n  onSelectAnotherClick(callback: () => void): void {\n    this.elements.selectAnotherButton?.addEventListener('click', callback);\n  }\n\n  onConvertAnotherClick(callback: () => void): void {\n    this.elements.convertAnotherButton?.addEventListener('click', callback);\n  }\n\n  onShareClick(callback: () => void): void {\n    this.elements.shareButton?.addEventListener('click', callback);\n  }\n\n  onDownloadClick(callback: () => void): void {\n    this.elements.downloadButton?.addEventListener('click', callback);\n  }\n\n  private hideAllStates(): void {\n    const states = [\n      this.elements.initialState,\n      this.elements.previewState,\n      this.elements.loadingState,\n      this.elements.convertingState,\n      this.elements.completedState,\n      this.elements.errorState,\n    ];\n\n    states.forEach((state) => {\n      if (state) {\n        state.classList.add('d-none');\n      }\n    });\n  }\n\n  private showElement(element: HTMLElement | null): void {\n    if (element) {\n      element.classList.remove('d-none');\n    }\n  }\n\n  private resetProgress(): void {\n    if (this.elements.progressBar) {\n      this.elements.progressBar.style.width = '0%';\n      this.elements.progressBar.setAttribute('aria-valuenow', '0');\n    }\n    if (this.elements.progressText) {\n      this.elements.progressText.textContent = '0%';\n    }\n    if (this.elements.progressMessage) {\n      this.elements.progressMessage.textContent = '';\n    }\n  }\n}\n\nexport const uiController = new UIController();\n","export const MIME_TYPE_JAVASCRIPT = \"text/javascript\";\nexport const MIME_TYPE_WASM = \"application/wasm\";\nexport const CORE_VERSION = \"0.12.9\";\nexport const CORE_URL = `https://unpkg.com/@ffmpeg/core@${CORE_VERSION}/dist/umd/ffmpeg-core.js`;\nexport var FFMessageType;\n(function (FFMessageType) {\n    FFMessageType[\"LOAD\"] = \"LOAD\";\n    FFMessageType[\"EXEC\"] = \"EXEC\";\n    FFMessageType[\"FFPROBE\"] = \"FFPROBE\";\n    FFMessageType[\"WRITE_FILE\"] = \"WRITE_FILE\";\n    FFMessageType[\"READ_FILE\"] = \"READ_FILE\";\n    FFMessageType[\"DELETE_FILE\"] = \"DELETE_FILE\";\n    FFMessageType[\"RENAME\"] = \"RENAME\";\n    FFMessageType[\"CREATE_DIR\"] = \"CREATE_DIR\";\n    FFMessageType[\"LIST_DIR\"] = \"LIST_DIR\";\n    FFMessageType[\"DELETE_DIR\"] = \"DELETE_DIR\";\n    FFMessageType[\"ERROR\"] = \"ERROR\";\n    FFMessageType[\"DOWNLOAD\"] = \"DOWNLOAD\";\n    FFMessageType[\"PROGRESS\"] = \"PROGRESS\";\n    FFMessageType[\"LOG\"] = \"LOG\";\n    FFMessageType[\"MOUNT\"] = \"MOUNT\";\n    FFMessageType[\"UNMOUNT\"] = \"UNMOUNT\";\n})(FFMessageType || (FFMessageType = {}));\n","/**\n * Generate an unique message ID.\n */\nexport const getMessageID = (() => {\n    let messageID = 0;\n    return () => messageID++;\n})();\n","export const ERROR_UNKNOWN_MESSAGE_TYPE = new Error(\"unknown message type\");\nexport const ERROR_NOT_LOADED = new Error(\"ffmpeg is not loaded, call `await ffmpeg.load()` first\");\nexport const ERROR_TERMINATED = new Error(\"called FFmpeg.terminate()\");\nexport const ERROR_IMPORT_FAILURE = new Error(\"failed to import ffmpeg-core.js\");\n","import { FFMessageType } from \"./const.js\";\nimport { getMessageID } from \"./utils.js\";\nimport { ERROR_TERMINATED, ERROR_NOT_LOADED } from \"./errors.js\";\n/**\n * Provides APIs to interact with ffmpeg web worker.\n *\n * @example\n * ```ts\n * const ffmpeg = new FFmpeg();\n * ```\n */\nexport class FFmpeg {\n    #worker = null;\n    /**\n     * #resolves and #rejects tracks Promise resolves and rejects to\n     * be called when we receive message from web worker.\n     */\n    #resolves = {};\n    #rejects = {};\n    #logEventCallbacks = [];\n    #progressEventCallbacks = [];\n    loaded = false;\n    /**\n     * register worker message event handlers.\n     */\n    #registerHandlers = () => {\n        if (this.#worker) {\n            this.#worker.onmessage = ({ data: { id, type, data }, }) => {\n                switch (type) {\n                    case FFMessageType.LOAD:\n                        this.loaded = true;\n                        this.#resolves[id](data);\n                        break;\n                    case FFMessageType.MOUNT:\n                    case FFMessageType.UNMOUNT:\n                    case FFMessageType.EXEC:\n                    case FFMessageType.FFPROBE:\n                    case FFMessageType.WRITE_FILE:\n                    case FFMessageType.READ_FILE:\n                    case FFMessageType.DELETE_FILE:\n                    case FFMessageType.RENAME:\n                    case FFMessageType.CREATE_DIR:\n                    case FFMessageType.LIST_DIR:\n                    case FFMessageType.DELETE_DIR:\n                        this.#resolves[id](data);\n                        break;\n                    case FFMessageType.LOG:\n                        this.#logEventCallbacks.forEach((f) => f(data));\n                        break;\n                    case FFMessageType.PROGRESS:\n                        this.#progressEventCallbacks.forEach((f) => f(data));\n                        break;\n                    case FFMessageType.ERROR:\n                        this.#rejects[id](data);\n                        break;\n                }\n                delete this.#resolves[id];\n                delete this.#rejects[id];\n            };\n        }\n    };\n    /**\n     * Generic function to send messages to web worker.\n     */\n    #send = ({ type, data }, trans = [], signal) => {\n        if (!this.#worker) {\n            return Promise.reject(ERROR_NOT_LOADED);\n        }\n        return new Promise((resolve, reject) => {\n            const id = getMessageID();\n            this.#worker && this.#worker.postMessage({ id, type, data }, trans);\n            this.#resolves[id] = resolve;\n            this.#rejects[id] = reject;\n            signal?.addEventListener(\"abort\", () => {\n                reject(new DOMException(`Message # ${id} was aborted`, \"AbortError\"));\n            }, { once: true });\n        });\n    };\n    on(event, callback) {\n        if (event === \"log\") {\n            this.#logEventCallbacks.push(callback);\n        }\n        else if (event === \"progress\") {\n            this.#progressEventCallbacks.push(callback);\n        }\n    }\n    off(event, callback) {\n        if (event === \"log\") {\n            this.#logEventCallbacks = this.#logEventCallbacks.filter((f) => f !== callback);\n        }\n        else if (event === \"progress\") {\n            this.#progressEventCallbacks = this.#progressEventCallbacks.filter((f) => f !== callback);\n        }\n    }\n    /**\n     * Loads ffmpeg-core inside web worker. It is required to call this method first\n     * as it initializes WebAssembly and other essential variables.\n     *\n     * @category FFmpeg\n     * @returns `true` if ffmpeg core is loaded for the first time.\n     */\n    load = ({ classWorkerURL, ...config } = {}, { signal } = {}) => {\n        if (!this.#worker) {\n            this.#worker = classWorkerURL ?\n                new Worker(new URL(classWorkerURL, import.meta.url), {\n                    type: \"module\",\n                }) :\n                // We need to duplicated the code here to enable webpack\n                // to bundle worekr.js here.\n                new Worker(new URL(\"./worker.js\", import.meta.url), {\n                    type: \"module\",\n                });\n            this.#registerHandlers();\n        }\n        return this.#send({\n            type: FFMessageType.LOAD,\n            data: config,\n        }, undefined, signal);\n    };\n    /**\n     * Execute ffmpeg command.\n     *\n     * @remarks\n     * To avoid common I/O issues, [\"-nostdin\", \"-y\"] are prepended to the args\n     * by default.\n     *\n     * @example\n     * ```ts\n     * const ffmpeg = new FFmpeg();\n     * await ffmpeg.load();\n     * await ffmpeg.writeFile(\"video.avi\", ...);\n     * // ffmpeg -i video.avi video.mp4\n     * await ffmpeg.exec([\"-i\", \"video.avi\", \"video.mp4\"]);\n     * const data = ffmpeg.readFile(\"video.mp4\");\n     * ```\n     *\n     * @returns `0` if no error, `!= 0` if timeout (1) or error.\n     * @category FFmpeg\n     */\n    exec = (\n    /** ffmpeg command line args */\n    args, \n    /**\n     * milliseconds to wait before stopping the command execution.\n     *\n     * @defaultValue -1\n     */\n    timeout = -1, { signal } = {}) => this.#send({\n        type: FFMessageType.EXEC,\n        data: { args, timeout },\n    }, undefined, signal);\n    /**\n     * Execute ffprobe command.\n     *\n     * @example\n     * ```ts\n     * const ffmpeg = new FFmpeg();\n     * await ffmpeg.load();\n     * await ffmpeg.writeFile(\"video.avi\", ...);\n     * // Getting duration of a video in seconds: ffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 video.avi -o output.txt\n     * await ffmpeg.ffprobe([\"-v\", \"error\", \"-show_entries\", \"format=duration\", \"-of\", \"default=noprint_wrappers=1:nokey=1\", \"video.avi\", \"-o\", \"output.txt\"]);\n     * const data = ffmpeg.readFile(\"output.txt\");\n     * ```\n     *\n     * @returns `0` if no error, `!= 0` if timeout (1) or error.\n     * @category FFmpeg\n     */\n    ffprobe = (\n    /** ffprobe command line args */\n    args, \n    /**\n     * milliseconds to wait before stopping the command execution.\n     *\n     * @defaultValue -1\n     */\n    timeout = -1, { signal } = {}) => this.#send({\n        type: FFMessageType.FFPROBE,\n        data: { args, timeout },\n    }, undefined, signal);\n    /**\n     * Terminate all ongoing API calls and terminate web worker.\n     * `FFmpeg.load()` must be called again before calling any other APIs.\n     *\n     * @category FFmpeg\n     */\n    terminate = () => {\n        const ids = Object.keys(this.#rejects);\n        // rejects all incomplete Promises.\n        for (const id of ids) {\n            this.#rejects[id](ERROR_TERMINATED);\n            delete this.#rejects[id];\n            delete this.#resolves[id];\n        }\n        if (this.#worker) {\n            this.#worker.terminate();\n            this.#worker = null;\n            this.loaded = false;\n        }\n    };\n    /**\n     * Write data to ffmpeg.wasm.\n     *\n     * @example\n     * ```ts\n     * const ffmpeg = new FFmpeg();\n     * await ffmpeg.load();\n     * await ffmpeg.writeFile(\"video.avi\", await fetchFile(\"../video.avi\"));\n     * await ffmpeg.writeFile(\"text.txt\", \"hello world\");\n     * ```\n     *\n     * @category File System\n     */\n    writeFile = (path, data, { signal } = {}) => {\n        const trans = [];\n        if (data instanceof Uint8Array) {\n            trans.push(data.buffer);\n        }\n        return this.#send({\n            type: FFMessageType.WRITE_FILE,\n            data: { path, data },\n        }, trans, signal);\n    };\n    mount = (fsType, options, mountPoint) => {\n        const trans = [];\n        return this.#send({\n            type: FFMessageType.MOUNT,\n            data: { fsType, options, mountPoint },\n        }, trans);\n    };\n    unmount = (mountPoint) => {\n        const trans = [];\n        return this.#send({\n            type: FFMessageType.UNMOUNT,\n            data: { mountPoint },\n        }, trans);\n    };\n    /**\n     * Read data from ffmpeg.wasm.\n     *\n     * @example\n     * ```ts\n     * const ffmpeg = new FFmpeg();\n     * await ffmpeg.load();\n     * const data = await ffmpeg.readFile(\"video.mp4\");\n     * ```\n     *\n     * @category File System\n     */\n    readFile = (path, \n    /**\n     * File content encoding, supports two encodings:\n     * - utf8: read file as text file, return data in string type.\n     * - binary: read file as binary file, return data in Uint8Array type.\n     *\n     * @defaultValue binary\n     */\n    encoding = \"binary\", { signal } = {}) => this.#send({\n        type: FFMessageType.READ_FILE,\n        data: { path, encoding },\n    }, undefined, signal);\n    /**\n     * Delete a file.\n     *\n     * @category File System\n     */\n    deleteFile = (path, { signal } = {}) => this.#send({\n        type: FFMessageType.DELETE_FILE,\n        data: { path },\n    }, undefined, signal);\n    /**\n     * Rename a file or directory.\n     *\n     * @category File System\n     */\n    rename = (oldPath, newPath, { signal } = {}) => this.#send({\n        type: FFMessageType.RENAME,\n        data: { oldPath, newPath },\n    }, undefined, signal);\n    /**\n     * Create a directory.\n     *\n     * @category File System\n     */\n    createDir = (path, { signal } = {}) => this.#send({\n        type: FFMessageType.CREATE_DIR,\n        data: { path },\n    }, undefined, signal);\n    /**\n     * List directory contents.\n     *\n     * @category File System\n     */\n    listDir = (path, { signal } = {}) => this.#send({\n        type: FFMessageType.LIST_DIR,\n        data: { path },\n    }, undefined, signal);\n    /**\n     * Delete an empty directory.\n     *\n     * @category File System\n     */\n    deleteDir = (path, { signal } = {}) => this.#send({\n        type: FFMessageType.DELETE_DIR,\n        data: { path },\n    }, undefined, signal);\n}\n","export var FFFSType;\n(function (FFFSType) {\n    FFFSType[\"MEMFS\"] = \"MEMFS\";\n    FFFSType[\"NODEFS\"] = \"NODEFS\";\n    FFFSType[\"NODERAWFS\"] = \"NODERAWFS\";\n    FFFSType[\"IDBFS\"] = \"IDBFS\";\n    FFFSType[\"WORKERFS\"] = \"WORKERFS\";\n    FFFSType[\"PROXYFS\"] = \"PROXYFS\";\n})(FFFSType || (FFFSType = {}));\n","export const ERROR_RESPONSE_BODY_READER = new Error(\"failed to get response body reader\");\nexport const ERROR_INCOMPLETED_DOWNLOAD = new Error(\"failed to complete download\");\n","export const HeaderContentLength = \"Content-Length\";\n","import { ERROR_RESPONSE_BODY_READER, ERROR_INCOMPLETED_DOWNLOAD, } from \"./errors.js\";\nimport { HeaderContentLength } from \"./const.js\";\nconst readFromBlobOrFile = (blob) => new Promise((resolve, reject) => {\n    const fileReader = new FileReader();\n    fileReader.onload = () => {\n        const { result } = fileReader;\n        if (result instanceof ArrayBuffer) {\n            resolve(new Uint8Array(result));\n        }\n        else {\n            resolve(new Uint8Array());\n        }\n    };\n    fileReader.onerror = (event) => {\n        reject(Error(`File could not be read! Code=${event?.target?.error?.code || -1}`));\n    };\n    fileReader.readAsArrayBuffer(blob);\n});\n/**\n * An util function to fetch data from url string, base64, URL, File or Blob format.\n *\n * Examples:\n * ```ts\n * // URL\n * await fetchFile(\"http://localhost:3000/video.mp4\");\n * // base64\n * await fetchFile(\"data:<type>;base64,wL2dvYWwgbW9yZ...\");\n * // URL\n * await fetchFile(new URL(\"video.mp4\", import.meta.url));\n * // File\n * fileInput.addEventListener('change', (e) => {\n *   await fetchFile(e.target.files[0]);\n * });\n * // Blob\n * const blob = new Blob(...);\n * await fetchFile(blob);\n * ```\n */\nexport const fetchFile = async (file) => {\n    let data;\n    if (typeof file === \"string\") {\n        /* From base64 format */\n        if (/data:_data\\/([a-zA-Z]*);base64,([^\"]*)/.test(file)) {\n            data = atob(file.split(\",\")[1])\n                .split(\"\")\n                .map((c) => c.charCodeAt(0));\n            /* From remote server/URL */\n        }\n        else {\n            data = await (await fetch(file)).arrayBuffer();\n        }\n    }\n    else if (file instanceof URL) {\n        data = await (await fetch(file)).arrayBuffer();\n    }\n    else if (file instanceof File || file instanceof Blob) {\n        data = await readFromBlobOrFile(file);\n    }\n    else {\n        return new Uint8Array();\n    }\n    return new Uint8Array(data);\n};\n/**\n * importScript dynamically import a script, useful when you\n * want to use different versions of ffmpeg.wasm based on environment.\n *\n * Example:\n *\n * ```ts\n * await importScript(\"http://localhost:3000/ffmpeg.js\");\n * ```\n */\nexport const importScript = async (url) => new Promise((resolve) => {\n    const script = document.createElement(\"script\");\n    const eventHandler = () => {\n        script.removeEventListener(\"load\", eventHandler);\n        resolve();\n    };\n    script.src = url;\n    script.type = \"text/javascript\";\n    script.addEventListener(\"load\", eventHandler);\n    document.getElementsByTagName(\"head\")[0].appendChild(script);\n});\n/**\n * Download content of a URL with progress.\n *\n * Progress only works when Content-Length is provided by the server.\n *\n */\nexport const downloadWithProgress = async (url, cb) => {\n    const resp = await fetch(url);\n    let buf;\n    try {\n        // Set total to -1 to indicate that there is not Content-Type Header.\n        const total = parseInt(resp.headers.get(HeaderContentLength) || \"-1\");\n        const reader = resp.body?.getReader();\n        if (!reader)\n            throw ERROR_RESPONSE_BODY_READER;\n        const chunks = [];\n        let received = 0;\n        for (;;) {\n            const { done, value } = await reader.read();\n            const delta = value ? value.length : 0;\n            if (done) {\n                if (total != -1 && total !== received)\n                    throw ERROR_INCOMPLETED_DOWNLOAD;\n                cb && cb({ url, total, received, delta, done });\n                break;\n            }\n            chunks.push(value);\n            received += delta;\n            cb && cb({ url, total, received, delta, done });\n        }\n        const data = new Uint8Array(received);\n        let position = 0;\n        for (const chunk of chunks) {\n            data.set(chunk, position);\n            position += chunk.length;\n        }\n        buf = data.buffer;\n    }\n    catch (e) {\n        console.log(`failed to send download progress event: `, e);\n        // Fetch arrayBuffer directly when it is not possible to get progress.\n        buf = await resp.arrayBuffer();\n        cb &&\n            cb({\n                url,\n                total: buf.byteLength,\n                received: buf.byteLength,\n                delta: 0,\n                done: true,\n            });\n    }\n    return buf;\n};\n/**\n * toBlobURL fetches data from an URL and return a blob URL.\n *\n * Example:\n *\n * ```ts\n * await toBlobURL(\"http://localhost:3000/ffmpeg.js\", \"text/javascript\");\n * ```\n */\nexport const toBlobURL = async (url, mimeType, progress = false, cb) => {\n    const buf = progress\n        ? await downloadWithProgress(url, cb)\n        : await (await fetch(url)).arrayBuffer();\n    const blob = new Blob([buf], { type: mimeType });\n    return URL.createObjectURL(blob);\n};\n","/**\n * Audio converter module using FFmpeg.wasm\n */\n\nimport { FFmpeg } from '@ffmpeg/ffmpeg';\nimport { fetchFile, toBlobURL } from '@ffmpeg/util';\nimport { ConversionResult, ProgressState, OUTPUT_BITRATE } from './types';\nimport { getOutputFileName } from './utils';\n\ntype ProgressCallback = (progress: ProgressState) => void;\n\nclass AudioConverter {\n  private ffmpeg: FFmpeg | null = null;\n  private loaded = false;\n  private loading = false;\n  private abortController: AbortController | null = null;\n\n  async load(onProgress?: ProgressCallback): Promise<void> {\n    if (this.loaded) return;\n    if (this.loading) {\n      while (this.loading) {\n        await new Promise((resolve) => setTimeout(resolve, 100));\n      }\n      return;\n    }\n\n    this.loading = true;\n\n    try {\n      this.ffmpeg = new FFmpeg();\n\n      this.ffmpeg.on('log', ({ message }) => {\n        if (import.meta.env.DEV) {\n          console.log('[FFmpeg]', message);\n        }\n      });\n\n      this.ffmpeg.on('progress', ({ progress }) => {\n        if (onProgress) {\n          onProgress({\n            stage: 'converting',\n            percentage: Math.round(progress * 100),\n            message: 'Convertendo áudio...',\n          });\n        }\n      });\n\n      onProgress?.({\n        stage: 'loading',\n        percentage: 0,\n        message: 'Carregando conversor...',\n      });\n\n      const baseURL = 'https://unpkg.com/@ffmpeg/core@0.12.6/dist/esm';\n\n      await this.ffmpeg.load({\n        coreURL: await toBlobURL(`${baseURL}/ffmpeg-core.js`, 'text/javascript'),\n        wasmURL: await toBlobURL(`${baseURL}/ffmpeg-core.wasm`, 'application/wasm'),\n      });\n\n      this.loaded = true;\n\n      onProgress?.({\n        stage: 'loading',\n        percentage: 100,\n        message: 'Conversor pronto!',\n      });\n    } catch (error) {\n      this.ffmpeg = null;\n      throw new Error(\n        'Erro ao carregar o conversor. Verifique sua conexão com a internet e tente novamente.'\n      );\n    } finally {\n      this.loading = false;\n    }\n  }\n\n  async convert(\n    inputFile: File,\n    onProgress?: ProgressCallback\n  ): Promise<ConversionResult> {\n    const startTime = Date.now();\n    const outputFileName = getOutputFileName(inputFile.name);\n\n    try {\n      if (!this.ffmpeg || !this.loaded) {\n        await this.load(onProgress);\n      }\n\n      if (!this.ffmpeg) {\n        throw new Error('FFmpeg não está carregado');\n      }\n\n      this.abortController = new AbortController();\n\n      onProgress?.({\n        stage: 'converting',\n        percentage: 0,\n        message: 'Preparando arquivo...',\n      });\n\n      const inputData = await fetchFile(inputFile);\n      const inputName = 'input' + this.getInputExtension(inputFile.name);\n      const outputName = 'output.mp3';\n\n      await this.ffmpeg.writeFile(inputName, inputData);\n\n      onProgress?.({\n        stage: 'converting',\n        percentage: 5,\n        message: 'Iniciando conversão...',\n      });\n\n      await this.ffmpeg.exec([\n        '-i',\n        inputName,\n        '-c:a',\n        'libmp3lame',\n        '-b:a',\n        OUTPUT_BITRATE,\n        '-y',\n        outputName,\n      ]);\n\n      onProgress?.({\n        stage: 'finalizing',\n        percentage: 95,\n        message: 'Finalizando...',\n      });\n\n      const data = await this.ffmpeg.readFile(outputName);\n\n      await this.ffmpeg.deleteFile(inputName);\n      await this.ffmpeg.deleteFile(outputName);\n\n      // Create a copy in a standard ArrayBuffer to ensure compatibility with Blob\n      const uint8Data = data as Uint8Array;\n      const buffer = new ArrayBuffer(uint8Data.byteLength);\n      new Uint8Array(buffer).set(uint8Data);\n      const outputBlob = new Blob([buffer], { type: 'audio/mpeg' });\n\n      onProgress?.({\n        stage: 'finalizing',\n        percentage: 100,\n        message: 'Conversão concluída!',\n      });\n\n      return {\n        success: true,\n        outputFile: outputBlob,\n        outputFileName,\n        error: null,\n        duration: Date.now() - startTime,\n      };\n    } catch (error) {\n      const errorMessage =\n        error instanceof Error\n          ? error.message\n          : 'Ocorreu um erro durante a conversão. Por favor, tente novamente.';\n\n      return {\n        success: false,\n        outputFile: null,\n        outputFileName,\n        error: errorMessage,\n        duration: Date.now() - startTime,\n      };\n    } finally {\n      this.abortController = null;\n    }\n  }\n\n  cancel(): void {\n    if (this.abortController) {\n      this.abortController.abort();\n    }\n    if (this.ffmpeg) {\n      this.ffmpeg.terminate();\n      this.ffmpeg = null;\n      this.loaded = false;\n    }\n  }\n\n  isLoaded(): boolean {\n    return this.loaded;\n  }\n\n  private getInputExtension(filename: string): string {\n    const lastDot = filename.lastIndexOf('.');\n    if (lastDot === -1) return '.opus';\n    return filename.substring(lastDot).toLowerCase();\n  }\n}\n\nexport const audioConverter = new AudioConverter();\n","/**\n * Share Handler - Web Share Target and Web Share API handling\n */\n\nimport { isWebShareSupported, createDownloadLink } from './utils';\n\nconst SHARED_FILE_KEY = 'shared-audio-file';\n\nclass ShareHandler {\n  async getSharedFile(): Promise<File | null> {\n    try {\n      const cache = await caches.open('shared-files');\n      const response = await cache.match(SHARED_FILE_KEY);\n\n      if (response) {\n        const blob = await response.blob();\n        const fileName =\n          response.headers.get('X-File-Name') || 'audio.opus';\n        const file = new File([blob], fileName, { type: blob.type });\n\n        await cache.delete(SHARED_FILE_KEY);\n\n        return file;\n      }\n    } catch (error) {\n      console.error('Error retrieving shared file:', error);\n    }\n\n    return null;\n  }\n\n  async shareFile(blob: Blob, fileName: string): Promise<boolean> {\n    if (!isWebShareSupported()) {\n      return false;\n    }\n\n    try {\n      const file = new File([blob], fileName, { type: 'audio/mpeg' });\n\n      const shareData = {\n        files: [file],\n        title: fileName,\n        text: 'Áudio convertido para MP3',\n      };\n\n      if (navigator.canShare && navigator.canShare(shareData)) {\n        await navigator.share(shareData);\n        return true;\n      }\n    } catch (error) {\n      if (error instanceof Error && error.name === 'AbortError') {\n        return false;\n      }\n      console.error('Error sharing file:', error);\n    }\n\n    return false;\n  }\n\n  downloadFile(blob: Blob, fileName: string): void {\n    createDownloadLink(blob, fileName);\n  }\n\n  isShareTargetAvailable(): boolean {\n    const urlParams = new URLSearchParams(window.location.search);\n    return urlParams.has('share-target') || urlParams.has('receiving-file-share');\n  }\n\n  clearShareParams(): void {\n    const url = new URL(window.location.href);\n    url.searchParams.delete('share-target');\n    url.searchParams.delete('receiving-file-share');\n    window.history.replaceState({}, '', url.toString());\n  }\n}\n\nexport const shareHandler = new ShareHandler();\n","/**\n * Main entry point - Application initialization and orchestration\n */\n\nimport { uiController } from \"./ui-controller\";\nimport { audioConverter } from \"./converter\";\nimport { shareHandler } from \"./share-handler\";\nimport { validateFile, getFileInfo, isServiceWorkerSupported } from \"./utils\";\nimport { ConversionResult } from \"./types\";\n\nclass App {\n  private currentFile: File | null = null;\n  private conversionResult: ConversionResult | null = null;\n\n  async init(): Promise<void> {\n    uiController.init();\n\n    this.setupEventHandlers();\n\n    await this.registerServiceWorker();\n\n    await this.checkForSharedFile();\n  }\n\n  private setupEventHandlers(): void {\n    uiController.setupDragAndDrop((file) => this.handleFileSelected(file));\n    uiController.setupFileInput((file) => this.handleFileSelected(file));\n\n    uiController.onConvertClick(() => this.startConversion());\n    uiController.onCancelClick(() => this.cancelConversion());\n    uiController.onRetryClick(() => this.retryConversion());\n    uiController.onSelectAnotherClick(() => this.reset());\n    uiController.onConvertAnotherClick(() => this.reset());\n    uiController.onShareClick(() => this.shareResult());\n    uiController.onDownloadClick(() => this.downloadResult());\n  }\n\n  private async registerServiceWorker(): Promise<void> {\n    if (!isServiceWorkerSupported()) {\n      console.warn(\"Service Worker not supported\");\n      return;\n    }\n\n    const swUrl = `${import.meta.env.BASE_URL}sw.js`;\n\n    try {\n      const registration = await navigator.serviceWorker.register(swUrl, {\n        scope: import.meta.env.BASE_URL,\n      });\n\n      registration.addEventListener(\"updatefound\", () => {\n        const newWorker = registration.installing;\n        if (newWorker) {\n          newWorker.addEventListener(\"statechange\", () => {\n            if (\n              newWorker.state === \"installed\" &&\n              navigator.serviceWorker.controller\n            ) {\n              console.log(\"New version available\");\n            }\n          });\n        }\n      });\n\n      console.log(\"Service Worker registered\");\n    } catch (error) {\n      console.error(\"Service Worker registration failed:\", error);\n    }\n  }\n\n  private async checkForSharedFile(): Promise<void> {\n    if (!shareHandler.isShareTargetAvailable()) {\n      return;\n    }\n\n    const sharedFile = await shareHandler.getSharedFile();\n\n    if (sharedFile) {\n      shareHandler.clearShareParams();\n      this.handleFileSelected(sharedFile);\n      await this.startConversion();\n    }\n  }\n\n  private handleFileSelected(file: File): void {\n    const validation = validateFile(file);\n\n    if (!validation.valid) {\n      uiController.showError(validation.error || \"Arquivo inválido\");\n      return;\n    }\n\n    this.currentFile = file;\n    const fileInfo = getFileInfo(file);\n    uiController.showFilePreview(fileInfo);\n  }\n\n  private async startConversion(): Promise<void> {\n    if (!this.currentFile) {\n      uiController.showError(\"Nenhum arquivo selecionado\");\n      return;\n    }\n\n    try {\n      this.conversionResult = await audioConverter.convert(\n        this.currentFile,\n        (progress) => uiController.updateProgress(progress)\n      );\n\n      if (this.conversionResult.success && this.conversionResult.outputFile) {\n        uiController.showCompleted(this.conversionResult.outputFileName);\n      } else {\n        uiController.showError(\n          this.conversionResult.error ||\n            \"Ocorreu um erro durante a conversão. Por favor, tente novamente.\"\n        );\n      }\n    } catch (error) {\n      const message =\n        error instanceof Error\n          ? error.message\n          : \"Ocorreu um erro durante a conversão. Por favor, tente novamente.\";\n      uiController.showError(message);\n    }\n  }\n\n  private cancelConversion(): void {\n    audioConverter.cancel();\n    this.reset();\n  }\n\n  private async retryConversion(): Promise<void> {\n    if (this.currentFile) {\n      await this.startConversion();\n    } else {\n      this.reset();\n    }\n  }\n\n  private reset(): void {\n    this.currentFile = null;\n    this.conversionResult = null;\n    uiController.resetToInitial();\n  }\n\n  private async shareResult(): Promise<void> {\n    if (!this.conversionResult?.outputFile) {\n      return;\n    }\n\n    const shared = await shareHandler.shareFile(\n      this.conversionResult.outputFile,\n      this.conversionResult.outputFileName\n    );\n\n    if (!shared) {\n      this.downloadResult();\n    }\n  }\n\n  private downloadResult(): void {\n    if (!this.conversionResult?.outputFile) {\n      return;\n    }\n\n    shareHandler.downloadFile(\n      this.conversionResult.outputFile,\n      this.conversionResult.outputFileName\n    );\n  }\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const app = new App();\n  app.init().catch(console.error);\n});\n"],"names":["MAX_FILE_SIZE","SUPPORTED_MIME_TYPES","SUPPORTED_EXTENSIONS","OUTPUT_BITRATE","OUTPUT_EXTENSION","formatFileSize","bytes","k","sizes","i","getFileExtension","filename","lastDot","replaceExtension","newExtension","validateFile","file","extension","mimeType","hasValidExtension","hasValidMimeType","getFileInfo","getOutputFileName","inputFileName","createDownloadLink","blob","url","a","isWebShareSupported","isServiceWorkerSupported","UIController","__publicField","state","fileInfo","progress","outputFileName","message","onFileDrop","dropZone","e","files","_a","onFileSelect","fileInput","callback","element","uiController","FFMessageType","getMessageID","messageID","ERROR_NOT_LOADED","ERROR_TERMINATED","FFmpeg","__privateAdd","_worker","_resolves","_rejects","_logEventCallbacks","_progressEventCallbacks","_registerHandlers","__privateGet","id","type","data","f","_send","trans","signal","resolve","reject","classWorkerURL","config","__privateSet","args","timeout","ids","path","fsType","options","mountPoint","encoding","oldPath","newPath","event","FFFSType","ERROR_RESPONSE_BODY_READER","ERROR_INCOMPLETED_DOWNLOAD","HeaderContentLength","readFromBlobOrFile","fileReader","result","_b","fetchFile","c","downloadWithProgress","cb","resp","buf","total","reader","chunks","received","done","value","delta","position","chunk","toBlobURL","AudioConverter","onProgress","baseURL","inputFile","startTime","inputData","inputName","outputName","uint8Data","buffer","outputBlob","error","errorMessage","audioConverter","SHARED_FILE_KEY","ShareHandler","cache","response","fileName","shareData","urlParams","shareHandler","App","swUrl","registration","newWorker","sharedFile","validation"],"mappings":"irCAkDO,MAAMA,EAAgB,IAAM,KAAO,KAE7BC,EAAuB,CAClC,aACA,YACA,yBACA,aACA,yBACF,EAEaC,EAAuB,CAAC,QAAS,MAAM,EAEvCC,EAAiB,OACjBC,EAAmB,OClDzB,SAASC,EAAeC,EAAuB,CACpD,GAAIA,IAAU,EAAG,MAAO,UAExB,MAAMC,EAAI,KACJC,EAAQ,CAAC,QAAS,KAAM,KAAM,IAAI,EAClCC,EAAI,KAAK,MAAM,KAAK,IAAIH,CAAK,EAAI,KAAK,IAAIC,CAAC,CAAC,EAElD,OAAO,YAAYD,EAAQ,KAAK,IAAIC,EAAGE,CAAC,GAAG,QAAQ,CAAC,CAAC,EAAI,IAAMD,EAAMC,CAAC,CACxE,CAEO,SAASC,EAAiBC,EAA0B,CACzD,MAAMC,EAAUD,EAAS,YAAY,GAAG,EACxC,OAAIC,IAAY,GAAW,GACpBD,EAAS,UAAUC,CAAO,EAAE,YAAA,CACrC,CAEO,SAASC,EAAiBF,EAAkBG,EAA8B,CAC/E,MAAMF,EAAUD,EAAS,YAAY,GAAG,EACxC,OAAIC,IAAY,GAAWD,EAAWG,EAC/BH,EAAS,UAAU,EAAGC,CAAO,EAAIE,CAC1C,CAEO,SAASC,EAAaC,EAA8B,CACzD,GAAIA,EAAK,KAAOhB,EACd,MAAO,CACL,MAAO,GACP,MAAO,4CAA4CK,EAAeL,CAAa,CAAC,GAAA,EAIpF,MAAMiB,EAAYP,EAAiBM,EAAK,IAAI,EACtCE,EAAWF,EAAK,KAAK,YAAA,EAErBG,EAAoBjB,EAAqB,SAASe,CAAS,EAC3DG,EACJnB,EAAqB,SAASiB,CAAQ,GACtCA,EAAS,WAAW,QAAQ,EAE9B,MAAI,CAACC,GAAqB,CAACC,EAClB,CACL,MAAO,GACP,MAAO,6EAAA,EAIJ,CAAE,MAAO,GAAM,MAAO,IAAA,CAC/B,CAEO,SAASC,EAAYL,EAAsB,CAChD,MAAO,CACL,KAAMA,EAAK,KACX,KAAMX,EAAeW,EAAK,IAAI,EAC9B,KAAMA,EAAK,MAAQ,YAAA,CAEvB,CAEO,SAASM,EAAkBC,EAA+B,CAC/D,OAAOV,EAAiBU,EAAenB,CAAgB,CACzD,CAEO,SAASoB,EAAmBC,EAAYd,EAAwB,CACrE,MAAMe,EAAM,IAAI,gBAAgBD,CAAI,EAC9BE,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,KAAOD,EACTC,EAAE,SAAWhB,EACb,SAAS,KAAK,YAAYgB,CAAC,EAC3BA,EAAE,MAAA,EACF,SAAS,KAAK,YAAYA,CAAC,EAC3B,IAAI,gBAAgBD,CAAG,CACzB,CAEO,SAASE,GAA+B,CAC7C,MAAO,UAAW,WAAa,aAAc,SAC/C,CAEO,SAASC,GAAoC,CAClD,MAAO,kBAAmB,SAC5B,CCnFA,MAAMC,CAAa,CA6BjB,aAAc,CA5BNC,EAAA,oBAAyB,WAEzBA,EAAA,iBA2BN,KAAK,SAAW,CACd,aAAc,KACd,aAAc,KACd,aAAc,KACd,gBAAiB,KACjB,eAAgB,KAChB,WAAY,KACZ,SAAU,KACV,UAAW,KACX,SAAU,KACV,SAAU,KACV,SAAU,KACV,YAAa,KACb,aAAc,KACd,gBAAiB,KACjB,eAAgB,KAChB,aAAc,KACd,YAAa,KACb,eAAgB,KAChB,cAAe,KACf,aAAc,KACd,YAAa,KACb,oBAAqB,KACrB,qBAAsB,IAAA,CAE1B,CAEA,MAAa,CACX,KAAK,SAAW,CACd,aAAc,SAAS,eAAe,eAAe,EACrD,aAAc,SAAS,eAAe,eAAe,EACrD,aAAc,SAAS,eAAe,eAAe,EACrD,gBAAiB,SAAS,eAAe,kBAAkB,EAC3D,eAAgB,SAAS,eAAe,iBAAiB,EACzD,WAAY,SAAS,eAAe,aAAa,EACjD,SAAU,SAAS,eAAe,WAAW,EAC7C,UAAW,SAAS,eAAe,YAAY,EAC/C,SAAU,SAAS,eAAe,WAAW,EAC7C,SAAU,SAAS,eAAe,WAAW,EAC7C,SAAU,SAAS,eAAe,WAAW,EAC7C,YAAa,SAAS,eAAe,cAAc,EACnD,aAAc,SAAS,eAAe,eAAe,EACrD,gBAAiB,SAAS,eAAe,kBAAkB,EAC3D,eAAgB,SAAS,eAAe,kBAAkB,EAC1D,aAAc,SAAS,eAAe,eAAe,EACrD,YAAa,SAAS,eAAe,WAAW,EAChD,eAAgB,SAAS,eAAe,cAAc,EACtD,cAAe,SAAS,eAAe,aAAa,EACpD,aAAc,SAAS,eAAe,YAAY,EAClD,YAAa,SAAS,eAAe,WAAW,EAChD,oBAAqB,SAAS,eAAe,oBAAoB,EACjE,qBAAsB,SAAS,eAAe,qBAAqB,CAAA,EAGjE,CAACH,EAAA,GAAyB,KAAK,SAAS,cAC1C,KAAK,SAAS,YAAY,MAAM,QAAU,QAG5C,KAAK,SAAS,SAAS,CACzB,CAEA,SAASI,EAAuB,CAI9B,OAHA,KAAK,aAAeA,EACpB,KAAK,cAAA,EAEGA,EAAA,CACN,IAAK,UACH,KAAK,YAAY,KAAK,SAAS,YAAY,EAC3C,MACF,IAAK,UACH,KAAK,YAAY,KAAK,SAAS,YAAY,EAC3C,MACF,IAAK,iBACH,KAAK,YAAY,KAAK,SAAS,YAAY,EAC3C,MACF,IAAK,aACH,KAAK,YAAY,KAAK,SAAS,eAAe,EAC9C,MACF,IAAK,YACH,KAAK,YAAY,KAAK,SAAS,cAAc,EAC7C,MACF,IAAK,QACH,KAAK,YAAY,KAAK,SAAS,UAAU,EACzC,KAAA,CAEN,CAEA,UAAqB,CACnB,OAAO,KAAK,YACd,CAEA,gBAAgBC,EAA0B,CACpC,KAAK,SAAS,WAChB,KAAK,SAAS,SAAS,YAAcA,EAAS,MAE5C,KAAK,SAAS,WAChB,KAAK,SAAS,SAAS,YAAcA,EAAS,MAE5C,KAAK,SAAS,WAChB,KAAK,SAAS,SAAS,YAAcA,EAAS,MAEhD,KAAK,SAAS,SAAS,CACzB,CAEA,eAAeC,EAA+B,CACxCA,EAAS,QAAU,UACrB,KAAK,SAAS,gBAAgB,EAE9B,KAAK,SAAS,YAAY,EAGxB,KAAK,SAAS,cAChB,KAAK,SAAS,YAAY,MAAM,MAAQ,GAAGA,EAAS,UAAU,IAC9D,KAAK,SAAS,YAAY,aACxB,gBACAA,EAAS,WAAW,SAAA,CAAS,GAG7B,KAAK,SAAS,eAChB,KAAK,SAAS,aAAa,YAAc,GAAGA,EAAS,UAAU,KAE7D,KAAK,SAAS,kBAChB,KAAK,SAAS,gBAAgB,YAAcA,EAAS,QAEzD,CAEA,cAAcC,EAA8B,CACtC,KAAK,SAAS,iBAChB,KAAK,SAAS,eAAe,YAAcA,GAE7C,KAAK,SAAS,WAAW,CAC3B,CAEA,UAAUC,EAAuB,CAC3B,KAAK,SAAS,eAChB,KAAK,SAAS,aAAa,YAAcA,GAE3C,KAAK,SAAS,OAAO,CACvB,CAEA,gBAAuB,CACjB,KAAK,SAAS,YAChB,KAAK,SAAS,UAAU,MAAQ,IAElC,KAAK,cAAA,EACL,KAAK,SAAS,SAAS,CACzB,CAEA,iBAAiBC,EAAwC,CACvD,MAAMC,EAAW,KAAK,SAAS,SAC1BA,IAELA,EAAS,iBAAiB,WAAaC,GAAM,CAC3CA,EAAE,eAAA,EACFA,EAAE,gBAAA,EACFD,EAAS,UAAU,IAAI,WAAW,CACpC,CAAC,EAEDA,EAAS,iBAAiB,YAAcC,GAAM,CAC5CA,EAAE,eAAA,EACFA,EAAE,gBAAA,EACFD,EAAS,UAAU,OAAO,WAAW,CACvC,CAAC,EAEDA,EAAS,iBAAiB,OAASC,GAAM,OACvCA,EAAE,eAAA,EACFA,EAAE,gBAAA,EACFD,EAAS,UAAU,OAAO,WAAW,EAErC,MAAME,GAAQC,EAAAF,EAAE,eAAF,YAAAE,EAAgB,MAC1BD,GAASA,EAAM,OAAS,GAC1BH,EAAWG,EAAM,CAAC,CAAC,CAEvB,CAAC,EAEDF,EAAS,iBAAiB,QAAS,IAAM,QACvCG,EAAA,KAAK,SAAS,YAAd,MAAAA,EAAyB,OAC3B,CAAC,EACH,CAEA,eAAeC,EAA0C,CACvD,MAAMC,EAAY,KAAK,SAAS,UAC3BA,GAELA,EAAU,iBAAiB,SAAU,IAAM,CACzC,MAAMH,EAAQG,EAAU,MACpBH,GAASA,EAAM,OAAS,GAC1BE,EAAaF,EAAM,CAAC,CAAC,CAEzB,CAAC,CACH,CAEA,eAAeI,EAA4B,QACzCH,EAAA,KAAK,SAAS,gBAAd,MAAAA,EAA6B,iBAAiB,QAASG,EACzD,CAEA,cAAcA,EAA4B,QACxCH,EAAA,KAAK,SAAS,eAAd,MAAAA,EAA4B,iBAAiB,QAASG,EACxD,CAEA,aAAaA,EAA4B,QACvCH,EAAA,KAAK,SAAS,cAAd,MAAAA,EAA2B,iBAAiB,QAASG,EACvD,CAEA,qBAAqBA,EAA4B,QAC/CH,EAAA,KAAK,SAAS,sBAAd,MAAAA,EAAmC,iBAAiB,QAASG,EAC/D,CAEA,sBAAsBA,EAA4B,QAChDH,EAAA,KAAK,SAAS,uBAAd,MAAAA,EAAoC,iBAAiB,QAASG,EAChE,CAEA,aAAaA,EAA4B,QACvCH,EAAA,KAAK,SAAS,cAAd,MAAAA,EAA2B,iBAAiB,QAASG,EACvD,CAEA,gBAAgBA,EAA4B,QAC1CH,EAAA,KAAK,SAAS,iBAAd,MAAAA,EAA8B,iBAAiB,QAASG,EAC1D,CAEQ,eAAsB,CACb,CACb,KAAK,SAAS,aACd,KAAK,SAAS,aACd,KAAK,SAAS,aACd,KAAK,SAAS,gBACd,KAAK,SAAS,eACd,KAAK,SAAS,UAAA,EAGT,QAASZ,GAAU,CACpBA,GACFA,EAAM,UAAU,IAAI,QAAQ,CAEhC,CAAC,CACH,CAEQ,YAAYa,EAAmC,CACjDA,GACFA,EAAQ,UAAU,OAAO,QAAQ,CAErC,CAEQ,eAAsB,CACxB,KAAK,SAAS,cAChB,KAAK,SAAS,YAAY,MAAM,MAAQ,KACxC,KAAK,SAAS,YAAY,aAAa,gBAAiB,GAAG,GAEzD,KAAK,SAAS,eAChB,KAAK,SAAS,aAAa,YAAc,MAEvC,KAAK,SAAS,kBAChB,KAAK,SAAS,gBAAgB,YAAc,GAEhD,CACF,CAEO,MAAMC,EAAe,IAAIhB,EClSzB,IAAIiB,GACV,SAAUA,EAAe,CACtBA,EAAc,KAAU,OACxBA,EAAc,KAAU,OACxBA,EAAc,QAAa,UAC3BA,EAAc,WAAgB,aAC9BA,EAAc,UAAe,YAC7BA,EAAc,YAAiB,cAC/BA,EAAc,OAAY,SAC1BA,EAAc,WAAgB,aAC9BA,EAAc,SAAc,WAC5BA,EAAc,WAAgB,aAC9BA,EAAc,MAAW,QACzBA,EAAc,SAAc,WAC5BA,EAAc,SAAc,WAC5BA,EAAc,IAAS,MACvBA,EAAc,MAAW,QACzBA,EAAc,QAAa,SAC/B,GAAGA,IAAkBA,EAAgB,CAAA,EAAG,ECnBjC,MAAMC,GAAgB,IAAM,CAC/B,IAAIC,EAAY,EAChB,MAAO,IAAMA,GACjB,GAAC,ECLYC,EAAmB,IAAI,MAAM,wDAAwD,EACrFC,EAAmB,IAAI,MAAM,2BAA2B,oBCS9D,MAAMC,EAAO,CAAb,cACHC,EAAA,KAAAC,EAAU,MAKVD,EAAA,KAAAE,EAAY,CAAA,GACZF,EAAA,KAAAG,EAAW,CAAA,GACXH,EAAA,KAAAI,EAAqB,CAAA,GACrBJ,EAAA,KAAAK,EAA0B,CAAA,GAC1B3B,EAAA,cAAS,IAITsB,EAAA,KAAAM,EAAoB,IAAM,CAClBC,EAAA,KAAKN,KACLM,EAAA,KAAKN,GAAQ,UAAY,CAAC,CAAE,KAAM,CAAE,GAAAO,EAAI,KAAAC,EAAM,KAAAC,CAAI,KAAU,CACxD,OAAQD,EAAI,CACR,KAAKf,EAAc,KACf,KAAK,OAAS,GACda,EAAA,KAAKL,GAAUM,CAAE,EAAEE,CAAI,EACvB,MACJ,KAAKhB,EAAc,MACnB,KAAKA,EAAc,QACnB,KAAKA,EAAc,KACnB,KAAKA,EAAc,QACnB,KAAKA,EAAc,WACnB,KAAKA,EAAc,UACnB,KAAKA,EAAc,YACnB,KAAKA,EAAc,OACnB,KAAKA,EAAc,WACnB,KAAKA,EAAc,SACnB,KAAKA,EAAc,WACfa,EAAA,KAAKL,GAAUM,CAAE,EAAEE,CAAI,EACvB,MACJ,KAAKhB,EAAc,IACfa,EAAA,KAAKH,GAAmB,QAASO,GAAMA,EAAED,CAAI,CAAC,EAC9C,MACJ,KAAKhB,EAAc,SACfa,EAAA,KAAKF,GAAwB,QAASM,GAAMA,EAAED,CAAI,CAAC,EACnD,MACJ,KAAKhB,EAAc,MACfa,EAAA,KAAKJ,GAASK,CAAE,EAAEE,CAAI,EACtB,KACxB,CACgB,OAAOH,EAAA,KAAKL,GAAUM,CAAE,EACxB,OAAOD,EAAA,KAAKJ,GAASK,CAAE,CAC3B,EAER,GAIAR,EAAA,KAAAY,EAAQ,CAAC,CAAE,KAAAH,EAAM,KAAAC,CAAI,EAAIG,EAAQ,CAAA,EAAIC,IAC5BP,EAAA,KAAKN,GAGH,IAAI,QAAQ,CAACc,EAASC,IAAW,CACpC,MAAMR,EAAKb,EAAY,EACvBY,EAAA,KAAKN,IAAWM,EAAA,KAAKN,GAAQ,YAAY,CAAE,GAAAO,EAAI,KAAAC,EAAM,KAAAC,CAAI,EAAIG,CAAK,EAClEN,EAAA,KAAKL,GAAUM,CAAE,EAAIO,EACrBR,EAAA,KAAKJ,GAASK,CAAE,EAAIQ,EACpBF,GAAA,MAAAA,EAAQ,iBAAiB,QAAS,IAAM,CACpCE,EAAO,IAAI,aAAa,aAAaR,CAAE,eAAgB,YAAY,CAAC,CACxE,EAAG,CAAE,KAAM,IACf,CAAC,EAVU,QAAQ,OAAOX,CAAgB,GAmC9CnB,EAAA,YAAO,CAAC,CAAE,eAAAuC,EAAgB,GAAGC,CAAM,EAAK,GAAI,CAAE,OAAAJ,CAAM,EAAK,MAChDP,EAAA,KAAKN,KACNkB,EAAA,KAAKlB,EAAUgB,EACX,IAAI,OAAO,IAAI,IAAIA,EAAgB,YAAY,GAAG,EAAG,CACjD,KAAM,QAC1B,CAAiB,EAGD,IAAI,OAAO,IAAA,IAAA,6CAAA,YAAA,GAAA,EAAyC,CAChD,KAAM,QAC1B,CAAiB,GACLV,EAAA,KAAKD,GAAL,YAEGC,EAAA,KAAKK,GAAL,UAAW,CACd,KAAMlB,EAAc,KACpB,KAAMwB,CAClB,EAAW,OAAWJ,KAsBlBpC,EAAA,YAAO,CAEP0C,EAMAC,EAAU,GAAI,CAAE,OAAAP,CAAM,EAAK,CAAA,IAAOP,EAAA,KAAKK,GAAL,UAAW,CACzC,KAAMlB,EAAc,KACpB,KAAM,CAAE,KAAA0B,EAAM,QAAAC,CAAO,CAC7B,EAAO,OAAWP,IAiBdpC,EAAA,eAAU,CAEV0C,EAMAC,EAAU,GAAI,CAAE,OAAAP,CAAM,EAAK,CAAA,IAAOP,EAAA,KAAKK,GAAL,UAAW,CACzC,KAAMlB,EAAc,QACpB,KAAM,CAAE,KAAA0B,EAAM,QAAAC,CAAO,CAC7B,EAAO,OAAWP,IAOdpC,EAAA,iBAAY,IAAM,CACd,MAAM4C,EAAM,OAAO,KAAKf,EAAA,KAAKJ,EAAQ,EAErC,UAAWK,KAAMc,EACbf,EAAA,KAAKJ,GAASK,CAAE,EAAEV,CAAgB,EAClC,OAAOS,EAAA,KAAKJ,GAASK,CAAE,EACvB,OAAOD,EAAA,KAAKL,GAAUM,CAAE,EAExBD,EAAA,KAAKN,KACLM,EAAA,KAAKN,GAAQ,UAAS,EACtBkB,EAAA,KAAKlB,EAAU,MACf,KAAK,OAAS,GAEtB,GAcAvB,EAAA,iBAAY,CAAC6C,EAAMb,EAAM,CAAE,OAAAI,CAAM,EAAK,CAAA,IAAO,CACzC,MAAMD,EAAQ,CAAA,EACd,OAAIH,aAAgB,YAChBG,EAAM,KAAKH,EAAK,MAAM,EAEnBH,EAAA,KAAKK,GAAL,UAAW,CACd,KAAMlB,EAAc,WACpB,KAAM,CAAE,KAAA6B,EAAM,KAAAb,CAAI,CAC9B,EAAWG,EAAOC,EACd,GACApC,EAAA,aAAQ,CAAC8C,EAAQC,EAASC,IAAe,CACrC,MAAMb,EAAQ,CAAA,EACd,OAAON,EAAA,KAAKK,GAAL,UAAW,CACd,KAAMlB,EAAc,MACpB,KAAM,CAAE,OAAA8B,EAAQ,QAAAC,EAAS,WAAAC,CAAU,CAC/C,EAAWb,EACP,GACAnC,EAAA,eAAWgD,GAAe,CACtB,MAAMb,EAAQ,CAAA,EACd,OAAON,EAAA,KAAKK,GAAL,UAAW,CACd,KAAMlB,EAAc,QACpB,KAAM,CAAE,WAAAgC,CAAU,CAC9B,EAAWb,EACP,GAaAnC,EAAA,gBAAW,CAAC6C,EAQZI,EAAW,SAAU,CAAE,OAAAb,CAAM,EAAK,CAAA,IAAOP,EAAA,KAAKK,GAAL,UAAW,CAChD,KAAMlB,EAAc,UACpB,KAAM,CAAE,KAAA6B,EAAM,SAAAI,CAAQ,CAC9B,EAAO,OAAWb,IAMdpC,EAAA,kBAAa,CAAC6C,EAAM,CAAE,OAAAT,CAAM,EAAK,CAAA,IAAOP,EAAA,KAAKK,GAAL,UAAW,CAC/C,KAAMlB,EAAc,YACpB,KAAM,CAAE,KAAA6B,CAAI,CACpB,EAAO,OAAWT,IAMdpC,EAAA,cAAS,CAACkD,EAASC,EAAS,CAAE,OAAAf,CAAM,EAAK,CAAA,IAAOP,EAAA,KAAKK,GAAL,UAAW,CACvD,KAAMlB,EAAc,OACpB,KAAM,CAAE,QAAAkC,EAAS,QAAAC,CAAO,CAChC,EAAO,OAAWf,IAMdpC,EAAA,iBAAY,CAAC6C,EAAM,CAAE,OAAAT,CAAM,EAAK,CAAA,IAAOP,EAAA,KAAKK,GAAL,UAAW,CAC9C,KAAMlB,EAAc,WACpB,KAAM,CAAE,KAAA6B,CAAI,CACpB,EAAO,OAAWT,IAMdpC,EAAA,eAAU,CAAC6C,EAAM,CAAE,OAAAT,CAAM,EAAK,CAAA,IAAOP,EAAA,KAAKK,GAAL,UAAW,CAC5C,KAAMlB,EAAc,SACpB,KAAM,CAAE,KAAA6B,CAAI,CACpB,EAAO,OAAWT,IAMdpC,EAAA,iBAAY,CAAC6C,EAAM,CAAE,OAAAT,CAAM,EAAK,CAAA,IAAOP,EAAA,KAAKK,GAAL,UAAW,CAC9C,KAAMlB,EAAc,WACpB,KAAM,CAAE,KAAA6B,CAAI,CACpB,EAAO,OAAWT,IAlOd,GAAGgB,EAAOvC,EAAU,CACZuC,IAAU,MACVvB,EAAA,KAAKH,GAAmB,KAAKb,CAAQ,EAEhCuC,IAAU,YACfvB,EAAA,KAAKF,GAAwB,KAAKd,CAAQ,CAElD,CACA,IAAIuC,EAAOvC,EAAU,CACbuC,IAAU,MACVX,EAAA,KAAKf,EAAqBG,EAAA,KAAKH,GAAmB,OAAQO,GAAMA,IAAMpB,CAAQ,GAEzEuC,IAAU,YACfX,EAAA,KAAKd,EAA0BE,EAAA,KAAKF,GAAwB,OAAQM,GAAMA,IAAMpB,CAAQ,EAEhG,CAoNJ,CArSIU,EAAA,YAKAC,EAAA,YACAC,EAAA,YACAC,EAAA,YACAC,EAAA,YAKAC,EAAA,YAuCAM,EAAA,YChEG,IAAImB,GACV,SAAUA,EAAU,CACjBA,EAAS,MAAW,QACpBA,EAAS,OAAY,SACrBA,EAAS,UAAe,YACxBA,EAAS,MAAW,QACpBA,EAAS,SAAc,WACvBA,EAAS,QAAa,SAC1B,GAAGA,IAAaA,EAAW,CAAA,EAAG,ECRvB,MAAMC,GAA6B,IAAI,MAAM,oCAAoC,EAC3EC,GAA6B,IAAI,MAAM,6BAA6B,ECDpEC,GAAsB,iBCE7BC,GAAsB/D,GAAS,IAAI,QAAQ,CAAC2C,EAASC,IAAW,CAClE,MAAMoB,EAAa,IAAI,WACvBA,EAAW,OAAS,IAAM,CACtB,KAAM,CAAE,OAAAC,CAAM,EAAKD,EACfC,aAAkB,YAClBtB,EAAQ,IAAI,WAAWsB,CAAM,CAAC,EAG9BtB,EAAQ,IAAI,UAAY,CAEhC,EACAqB,EAAW,QAAWN,GAAU,SAC5Bd,EAAO,MAAM,kCAAgCsB,GAAAlD,EAAA0C,GAAA,YAAAA,EAAO,SAAP,YAAA1C,EAAe,QAAf,YAAAkD,EAAsB,OAAQ,EAAE,EAAE,CAAC,CACpF,EACAF,EAAW,kBAAkBhE,CAAI,CACrC,CAAC,EAqBYmE,GAAY,MAAO5E,GAAS,CACrC,IAAI+C,EACJ,GAAI,OAAO/C,GAAS,SAEZ,yCAAyC,KAAKA,CAAI,EAClD+C,EAAO,KAAK/C,EAAK,MAAM,GAAG,EAAE,CAAC,CAAC,EACzB,MAAM,EAAE,EACR,IAAK6E,GAAMA,EAAE,WAAW,CAAC,CAAC,EAI/B9B,EAAO,MAAO,MAAM,MAAM/C,CAAI,GAAG,YAAW,UAG3CA,aAAgB,IACrB+C,EAAO,MAAO,MAAM,MAAM/C,CAAI,GAAG,YAAW,UAEvCA,aAAgB,MAAQA,aAAgB,KAC7C+C,EAAO,MAAMyB,GAAmBxE,CAAI,MAGpC,QAAO,IAAI,WAEf,OAAO,IAAI,WAAW+C,CAAI,CAC9B,EA4Ba+B,GAAuB,MAAOpE,EAAKqE,IAAO,OACnD,MAAMC,EAAO,MAAM,MAAMtE,CAAG,EAC5B,IAAIuE,EACJ,GAAI,CAEA,MAAMC,EAAQ,SAASF,EAAK,QAAQ,IAAIT,EAAmB,GAAK,IAAI,EAC9DY,GAAS1D,EAAAuD,EAAK,OAAL,YAAAvD,EAAW,YAC1B,GAAI,CAAC0D,EACD,MAAMd,GACV,MAAMe,EAAS,CAAA,EACf,IAAIC,EAAW,EACf,OAAS,CACL,KAAM,CAAE,KAAAC,EAAM,MAAAC,CAAK,EAAK,MAAMJ,EAAO,KAAI,EACnCK,EAAQD,EAAQA,EAAM,OAAS,EACrC,GAAID,EAAM,CACN,GAAIJ,GAAS,IAAMA,IAAUG,EACzB,MAAMf,GACVS,GAAMA,EAAG,CAAE,IAAArE,EAAK,MAAAwE,EAAO,SAAAG,EAAU,MAAAG,EAAO,KAAAF,EAAM,EAC9C,KACJ,CACAF,EAAO,KAAKG,CAAK,EACjBF,GAAYG,EACZT,GAAMA,EAAG,CAAE,IAAArE,EAAK,MAAAwE,EAAO,SAAAG,EAAU,MAAAG,EAAO,KAAAF,EAAM,CAClD,CACA,MAAMvC,EAAO,IAAI,WAAWsC,CAAQ,EACpC,IAAII,EAAW,EACf,UAAWC,KAASN,EAChBrC,EAAK,IAAI2C,EAAOD,CAAQ,EACxBA,GAAYC,EAAM,OAEtBT,EAAMlC,EAAK,MACf,OACOxB,EAAG,CACN,QAAQ,IAAI,2CAA4CA,CAAC,EAEzD0D,EAAM,MAAMD,EAAK,YAAW,CAShC,CACA,OAAOC,CACX,EAUaU,EAAY,MAAOjF,EAAKR,EAAUgB,EAAW,GAAO6D,IAAO,CACpE,MAAME,EAAM/D,EACN,MAAM4D,GAAqBpE,EAAKqE,CAAE,EAClC,MAAO,MAAM,MAAMrE,CAAG,GAAG,YAAW,EACpCD,EAAO,IAAI,KAAK,CAACwE,CAAG,EAAG,CAAE,KAAM/E,EAAU,EAC/C,OAAO,IAAI,gBAAgBO,CAAI,CACnC,EC7IA,MAAMmF,EAAe,CAArB,cACU7E,EAAA,cAAwB,MACxBA,EAAA,cAAS,IACTA,EAAA,eAAU,IACVA,EAAA,uBAA0C,MAElD,MAAM,KAAK8E,EAA8C,CACvD,GAAI,MAAK,OACT,IAAI,KAAK,QAAS,CAChB,KAAO,KAAK,SACV,MAAM,IAAI,QAASzC,GAAY,WAAWA,EAAS,GAAG,CAAC,EAEzD,MACF,CAEA,KAAK,QAAU,GAEf,GAAI,CACF,KAAK,OAAS,IAAIhB,GAElB,KAAK,OAAO,GAAG,MAAO,CAAC,CAAE,QAAAhB,KAAc,CAIvC,CAAC,EAED,KAAK,OAAO,GAAG,WAAY,CAAC,CAAE,SAAAF,KAAe,CACvC2E,GACFA,EAAW,CACT,MAAO,aACP,WAAY,KAAK,MAAM3E,EAAW,GAAG,EACrC,QAAS,sBAAA,CACV,CAEL,CAAC,EAED2E,GAAA,MAAAA,EAAa,CACX,MAAO,UACP,WAAY,EACZ,QAAS,yBAAA,GAGX,MAAMC,EAAU,iDAEhB,MAAM,KAAK,OAAO,KAAK,CACrB,QAAS,MAAMH,EAAU,GAAGG,CAAO,kBAAmB,iBAAiB,EACvE,QAAS,MAAMH,EAAU,GAAGG,CAAO,oBAAqB,kBAAkB,CAAA,CAC3E,EAED,KAAK,OAAS,GAEdD,GAAA,MAAAA,EAAa,CACX,MAAO,UACP,WAAY,IACZ,QAAS,mBAAA,EAEb,MAAgB,CACd,WAAK,OAAS,KACR,IAAI,MACR,uFAAA,CAEJ,QAAA,CACE,KAAK,QAAU,EACjB,EACF,CAEA,MAAM,QACJE,EACAF,EAC2B,CAC3B,MAAMG,EAAY,KAAK,IAAA,EACjB7E,EAAiBb,EAAkByF,EAAU,IAAI,EAEvD,GAAI,CAKF,IAJI,CAAC,KAAK,QAAU,CAAC,KAAK,SACxB,MAAM,KAAK,KAAKF,CAAU,EAGxB,CAAC,KAAK,OACR,MAAM,IAAI,MAAM,2BAA2B,EAG7C,KAAK,gBAAkB,IAAI,gBAE3BA,GAAA,MAAAA,EAAa,CACX,MAAO,aACP,WAAY,EACZ,QAAS,uBAAA,GAGX,MAAMI,EAAY,MAAMrB,GAAUmB,CAAS,EACrCG,EAAY,QAAU,KAAK,kBAAkBH,EAAU,IAAI,EAC3DI,EAAa,aAEnB,MAAM,KAAK,OAAO,UAAUD,EAAWD,CAAS,EAEhDJ,GAAA,MAAAA,EAAa,CACX,MAAO,aACP,WAAY,EACZ,QAAS,wBAAA,GAGX,MAAM,KAAK,OAAO,KAAK,CACrB,KACAK,EACA,OACA,aACA,OACA/G,EACA,KACAgH,CAAA,CACD,EAEDN,GAAA,MAAAA,EAAa,CACX,MAAO,aACP,WAAY,GACZ,QAAS,gBAAA,GAGX,MAAM9C,EAAO,MAAM,KAAK,OAAO,SAASoD,CAAU,EAElD,MAAM,KAAK,OAAO,WAAWD,CAAS,EACtC,MAAM,KAAK,OAAO,WAAWC,CAAU,EAGvC,MAAMC,EAAYrD,EACZsD,EAAS,IAAI,YAAYD,EAAU,UAAU,EACnD,IAAI,WAAWC,CAAM,EAAE,IAAID,CAAS,EACpC,MAAME,EAAa,IAAI,KAAK,CAACD,CAAM,EAAG,CAAE,KAAM,aAAc,EAE5D,OAAAR,GAAA,MAAAA,EAAa,CACX,MAAO,aACP,WAAY,IACZ,QAAS,sBAAA,GAGJ,CACL,QAAS,GACT,WAAYS,EACZ,eAAAnF,EACA,MAAO,KACP,SAAU,KAAK,MAAQ6E,CAAA,CAE3B,OAASO,EAAO,CACd,MAAMC,EACJD,aAAiB,MACbA,EAAM,QACN,mEAEN,MAAO,CACL,QAAS,GACT,WAAY,KACZ,eAAApF,EACA,MAAOqF,EACP,SAAU,KAAK,MAAQR,CAAA,CAE3B,QAAA,CACE,KAAK,gBAAkB,IACzB,CACF,CAEA,QAAe,CACT,KAAK,iBACP,KAAK,gBAAgB,MAAA,EAEnB,KAAK,SACP,KAAK,OAAO,UAAA,EACZ,KAAK,OAAS,KACd,KAAK,OAAS,GAElB,CAEA,UAAoB,CAClB,OAAO,KAAK,MACd,CAEQ,kBAAkBrG,EAA0B,CAClD,MAAMC,EAAUD,EAAS,YAAY,GAAG,EACxC,OAAIC,IAAY,GAAW,QACpBD,EAAS,UAAUC,CAAO,EAAE,YAAA,CACrC,CACF,CAEO,MAAM6G,EAAiB,IAAIb,GC5L5Bc,EAAkB,oBAExB,MAAMC,EAAa,CACjB,MAAM,eAAsC,CAC1C,GAAI,CACF,MAAMC,EAAQ,MAAM,OAAO,KAAK,cAAc,EACxCC,EAAW,MAAMD,EAAM,MAAMF,CAAe,EAElD,GAAIG,EAAU,CACZ,MAAMpG,EAAO,MAAMoG,EAAS,KAAA,EACtBC,EACJD,EAAS,QAAQ,IAAI,aAAa,GAAK,aACnC7G,EAAO,IAAI,KAAK,CAACS,CAAI,EAAGqG,EAAU,CAAE,KAAMrG,EAAK,KAAM,EAE3D,aAAMmG,EAAM,OAAOF,CAAe,EAE3B1G,CACT,CACF,OAASuG,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,CACtD,CAEA,OAAO,IACT,CAEA,MAAM,UAAU9F,EAAYqG,EAAoC,CAC9D,GAAI,CAAClG,IACH,MAAO,GAGT,GAAI,CAGF,MAAMmG,EAAY,CAChB,MAAO,CAHI,IAAI,KAAK,CAACtG,CAAI,EAAGqG,EAAU,CAAE,KAAM,aAAc,CAGhD,EACZ,MAAOA,EACP,KAAM,2BAAA,EAGR,GAAI,UAAU,UAAY,UAAU,SAASC,CAAS,EACpD,aAAM,UAAU,MAAMA,CAAS,EACxB,EAEX,OAASR,EAAO,CACd,GAAIA,aAAiB,OAASA,EAAM,OAAS,aAC3C,MAAO,GAET,QAAQ,MAAM,sBAAuBA,CAAK,CAC5C,CAEA,MAAO,EACT,CAEA,aAAa9F,EAAYqG,EAAwB,CAC/CtG,EAAmBC,EAAMqG,CAAQ,CACnC,CAEA,wBAAkC,CAChC,MAAME,EAAY,IAAI,gBAAgB,OAAO,SAAS,MAAM,EAC5D,OAAOA,EAAU,IAAI,cAAc,GAAKA,EAAU,IAAI,sBAAsB,CAC9E,CAEA,kBAAyB,CACvB,MAAMtG,EAAM,IAAI,IAAI,OAAO,SAAS,IAAI,EACxCA,EAAI,aAAa,OAAO,cAAc,EACtCA,EAAI,aAAa,OAAO,sBAAsB,EAC9C,OAAO,QAAQ,aAAa,CAAA,EAAI,GAAIA,EAAI,UAAU,CACpD,CACF,CAEO,MAAMuG,EAAe,IAAIN,GClEhC,MAAMO,EAAI,CAAV,cACUnG,EAAA,mBAA2B,MAC3BA,EAAA,wBAA4C,MAEpD,MAAM,MAAsB,CAC1Be,EAAa,KAAA,EAEb,KAAK,mBAAA,EAEL,MAAM,KAAK,sBAAA,EAEX,MAAM,KAAK,mBAAA,CACb,CAEQ,oBAA2B,CACjCA,EAAa,iBAAkB9B,GAAS,KAAK,mBAAmBA,CAAI,CAAC,EACrE8B,EAAa,eAAgB9B,GAAS,KAAK,mBAAmBA,CAAI,CAAC,EAEnE8B,EAAa,eAAe,IAAM,KAAK,gBAAA,CAAiB,EACxDA,EAAa,cAAc,IAAM,KAAK,iBAAA,CAAkB,EACxDA,EAAa,aAAa,IAAM,KAAK,gBAAA,CAAiB,EACtDA,EAAa,qBAAqB,IAAM,KAAK,MAAA,CAAO,EACpDA,EAAa,sBAAsB,IAAM,KAAK,MAAA,CAAO,EACrDA,EAAa,aAAa,IAAM,KAAK,YAAA,CAAa,EAClDA,EAAa,gBAAgB,IAAM,KAAK,eAAA,CAAgB,CAC1D,CAEA,MAAc,uBAAuC,CACnD,GAAI,CAACjB,IAA4B,CAC/B,QAAQ,KAAK,8BAA8B,EAC3C,MACF,CAEA,MAAMsG,EAAQ,yBAEd,GAAI,CACF,MAAMC,EAAe,MAAM,UAAU,cAAc,SAASD,EAAO,CACjE,MAAO,mBAAA,CACR,EAEDC,EAAa,iBAAiB,cAAe,IAAM,CACjD,MAAMC,EAAYD,EAAa,WAC3BC,GACFA,EAAU,iBAAiB,cAAe,IAAM,CAE5CA,EAAU,QAAU,aACpB,UAAU,cAAc,YAExB,QAAQ,IAAI,uBAAuB,CAEvC,CAAC,CAEL,CAAC,EAED,QAAQ,IAAI,2BAA2B,CACzC,OAASd,EAAO,CACd,QAAQ,MAAM,sCAAuCA,CAAK,CAC5D,CACF,CAEA,MAAc,oBAAoC,CAChD,GAAI,CAACU,EAAa,yBAChB,OAGF,MAAMK,EAAa,MAAML,EAAa,cAAA,EAElCK,IACFL,EAAa,iBAAA,EACb,KAAK,mBAAmBK,CAAU,EAClC,MAAM,KAAK,gBAAA,EAEf,CAEQ,mBAAmBtH,EAAkB,CAC3C,MAAMuH,EAAaxH,EAAaC,CAAI,EAEpC,GAAI,CAACuH,EAAW,MAAO,CACrBzF,EAAa,UAAUyF,EAAW,OAAS,kBAAkB,EAC7D,MACF,CAEA,KAAK,YAAcvH,EACnB,MAAMiB,EAAWZ,EAAYL,CAAI,EACjC8B,EAAa,gBAAgBb,CAAQ,CACvC,CAEA,MAAc,iBAAiC,CAC7C,GAAI,CAAC,KAAK,YAAa,CACrBa,EAAa,UAAU,4BAA4B,EACnD,MACF,CAEA,GAAI,CACF,KAAK,iBAAmB,MAAM2E,EAAe,QAC3C,KAAK,YACJvF,GAAaY,EAAa,eAAeZ,CAAQ,CAAA,EAGhD,KAAK,iBAAiB,SAAW,KAAK,iBAAiB,WACzDY,EAAa,cAAc,KAAK,iBAAiB,cAAc,EAE/DA,EAAa,UACX,KAAK,iBAAiB,OACpB,kEAAA,CAGR,OAASyE,EAAO,CACd,MAAMnF,EACJmF,aAAiB,MACbA,EAAM,QACN,mEACNzE,EAAa,UAAUV,CAAO,CAChC,CACF,CAEQ,kBAAyB,CAC/BqF,EAAe,OAAA,EACf,KAAK,MAAA,CACP,CAEA,MAAc,iBAAiC,CACzC,KAAK,YACP,MAAM,KAAK,gBAAA,EAEX,KAAK,MAAA,CAET,CAEQ,OAAc,CACpB,KAAK,YAAc,KACnB,KAAK,iBAAmB,KACxB3E,EAAa,eAAA,CACf,CAEA,MAAc,aAA6B,OACzC,GAAI,GAACL,EAAA,KAAK,mBAAL,MAAAA,EAAuB,YAC1B,OAGa,MAAMwF,EAAa,UAChC,KAAK,iBAAiB,WACtB,KAAK,iBAAiB,cAAA,GAItB,KAAK,eAAA,CAET,CAEQ,gBAAuB,QACxBxF,EAAA,KAAK,mBAAL,MAAAA,EAAuB,YAI5BwF,EAAa,aACX,KAAK,iBAAiB,WACtB,KAAK,iBAAiB,cAAA,CAE1B,CACF,CAEA,SAAS,iBAAiB,mBAAoB,IAAM,CACtC,IAAIC,GAAA,EACZ,KAAA,EAAO,MAAM,QAAQ,KAAK,CAChC,CAAC","x_google_ignoreList":[3,4,5,6,7,8,9,10]}